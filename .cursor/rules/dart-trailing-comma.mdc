---
description: Dartのtrailing comma（末尾カンマ）に関するルール。コードの可読性と保守性を向上させるために、適切な場所でtrailing commaを使用する必要があります。
globs: ["**/*.dart"]
alwaysApply: true
---

# Dart Trailing Comma Rules

## 必須事項

Dartファイルでは、以下の場合にtrailing comma（末尾カンマ）を必ず使用してください：

### 1. 関数呼び出しの引数
```dart
// 良い例
Text(
  'Hello World',
  style: TextStyle(
    fontSize: 16,
    color: Colors.black,
  ),
)

// 避けるべき例
Text(
  'Hello World',
  style: TextStyle(
    fontSize: 16,
    color: Colors.black)  // trailing commaがない
)
```

### 2. リスト・マップの要素
```dart
// 良い例
final list = [
  'item1',
  'item2',
  'item3',
];

final map = {
  'key1': 'value1',
  'key2': 'value2',
  'key3': 'value3',
};

// 避けるべき例
final list = [
  'item1',
  'item2',
  'item3'  // trailing commaがない
];
```

### 3. クラス定義のフィールド
```dart
// 良い例
class MyWidget extends StatelessWidget {
  const MyWidget({
    required this.title,
    this.subtitle,
    super.key,
  });

  final String title;
  final String? subtitle;
}

// 避けるべき例
class MyWidget extends StatelessWidget {
  const MyWidget({
    required this.title,
    this.subtitle,
    super.key  // trailing commaがない
  });
}
```

### 4. Widgetのプロパティ
```dart
// 良い例
Container(
  width: 100,
  height: 100,
  decoration: BoxDecoration(
    color: Colors.blue,
    borderRadius: BorderRadius.circular(8),
  ),
)

// 避けるべき例
Container(
  width: 100,
  height: 100,
  decoration: BoxDecoration(
    color: Colors.blue,
    borderRadius: BorderRadius.circular(8)  // trailing commaがない
  )
)
```

## 理由

- **コードの可読性向上**: 新しい要素を追加する際に、前の行を変更する必要がない
- **Git差分の明確化**: 新しい要素の追加時に、前の行の変更が差分に含まれない
- **一貫性の維持**: プロジェクト全体で統一されたコーディングスタイル
- **lintエラーの防止**: `dart format`や`flutter analyze`でのエラーを防ぐ

## 自動修正

このルールに従わないコードは、以下のコマンドで自動修正できます：
```bash
dart format .
flutter analyze --fix
```
